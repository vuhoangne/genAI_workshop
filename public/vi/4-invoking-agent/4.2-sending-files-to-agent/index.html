<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.146.1">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="//localhost:1313/images/favicon.png" type="image/png">

    <title>Gửi files cho Agent :: Thiết lập AWS Account</title>

    
    <link href="//localhost:1313/css/nucleus.css?1748172313" rel="stylesheet">
    <link href="//localhost:1313/css/fontawesome-all.min.css?1748172313" rel="stylesheet">
    <link href="//localhost:1313/css/hybrid.css?1748172313" rel="stylesheet">
    <link href="//localhost:1313/css/featherlight.min.css?1748172313" rel="stylesheet">
    <link href="//localhost:1313/css/perfect-scrollbar.min.css?1748172313" rel="stylesheet">
    <link href="//localhost:1313/css/auto-complete.css?1748172313" rel="stylesheet">
    <link href="//localhost:1313/css/atom-one-dark-reasonable.css?1748172313" rel="stylesheet">
    <link href="//localhost:1313/css/theme.css?1748172313" rel="stylesheet">
    <link href="//localhost:1313/css/hugo-theme.css?1748172313" rel="stylesheet">
    
    <link href="//localhost:1313/css/theme-workshop.css?1748172313" rel="stylesheet">
    
    

    <script src="//localhost:1313/js/jquery-3.3.1.min.js?1748172313"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="//localhost:1313/vi/4-invoking-agent/4.2-sending-files-to-agent/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="//localhost:1313/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="//localhost:1313/js/lunr.min.js?1748172313"></script>
<script type="text/javascript" src="//localhost:1313/js/auto-complete.js?1748172313"></script>
<script type="text/javascript">
    
        var baseurl = "\/\/localhost:1313\/\/vi";
    
</script>
<script type="text/javascript" src="//localhost:1313/js/search.js?1748172313"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/vi/1-introduction/" title="Giới thiệu" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/1-introduction/">
           <b> 1. </b> Giới thiệu
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/2-module1/" title="Module 1" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/2-module1/">
           <b> 2. </b> Module 1
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/3-module2/" title="Module 2" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-module2/">
           <b> 3. </b> Module 2
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/3-module2/3.1-use-amazon-bedrock-playground/" title="Use Amazon Bedrock Playground" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-module2/3.1-use-amazon-bedrock-playground/">
           <b> 3.1 </b> Use Amazon Bedrock Playground
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-module2/3.2-use-amazon-bedrock-api/" title="Use Amazon Bedrock API" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-module2/3.2-use-amazon-bedrock-api/">
           <b> 3.2 </b> Use Amazon Bedrock API
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/3-module2/3.2-use-amazon-bedrock-api/3.2.1-generating-images-with-amazon-bedrock/" title="Generating Images with Amazon Bedrock" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-module2/3.2-use-amazon-bedrock-api/3.2.1-generating-images-with-amazon-bedrock/">
           <b> 3.2.1 </b> Generating Images with Amazon Bedrock
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-module2/3.2-use-amazon-bedrock-api/3.2.2-generating-text-with-amazon-bedrock/" title="Generating Text with Amazon Bedrock" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-module2/3.2-use-amazon-bedrock-api/3.2.2-generating-text-with-amazon-bedrock/">
           <b> 3.2.2 </b> Generating Text with Amazon Bedrock
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/3-module2/3.2-use-amazon-bedrock-api/3.2.3-understanding-video-with-amazon-bedrock/" title="Understanding Video with Amazon Bedrock" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/3-module2/3.2-use-amazon-bedrock-api/3.2.3-understanding-video-with-amazon-bedrock/">
           <b> 3.2.3 </b> Understanding Video with Amazon Bedrock
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/4-invoking-agent/" title="Thực thi Amazon Bedrock Agent" class="dd-item 
        parent
        
        
        ">
      <a href="//localhost:1313/vi/4-invoking-agent/">
           <b> 4. </b> Thực thi Amazon Bedrock Agent
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/4-invoking-agent/4.1-invoking-code-interpreter/" title="Thực Thi Trình Biên Dịch Code" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/4-invoking-agent/4.1-invoking-code-interpreter/">
           <b> 4.1. </b> Thực Thi Trình Biên Dịch Code
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/4-invoking-agent/4.2-sending-files-to-agent/" title="Gửi files cho Agent" class="dd-item 
        
        active
        
        ">
      <a href="//localhost:1313/vi/4-invoking-agent/4.2-sending-files-to-agent/">
           <b> 4.2. </b> Gửi files cho Agent
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/4-invoking-agent/4.3-generating-files-with-code-interpreter/" title="Tạo File với Trình Thông Dịch Mã" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/4-invoking-agent/4.3-generating-files-with-code-interpreter/">
           <b> 4.3. </b> Tạo File với Trình Thông Dịch Mã
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/5-resource-clean-up/" title="Dọn dẹp tài nguyên" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/5-resource-clean-up/">
           <b> 5. </b> Dọn dẹp tài nguyên
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/6-conclusion/" title="Kết luận" class="dd-item 
        
        
        
        ">
      <a href="//localhost:1313/vi/6-conclusion/">
           <b> 6. </b> Kết luận
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="//localhost:1313/4-invoking-agent/4.2-sending-files-to-agent/">English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="//localhost:1313/vi/4-invoking-agent/4.2-sending-files-to-agent/" selected>Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830891&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>25/05/2025</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
           
            <i>
                <a href="https://www.linkedin.com/in/jotaguy/"  style="color:orange">Gia Hưng</a> <br>
                <a href="https://www.linkedin.com/in/vanhoangkha/"  style="color:orange">Kha Văn</a> <br>
                <a href="https://www.linkedin.com/in/lenguyenvuhoang-hayden/"  style="color:orange">Vũ Hoàng</a> <br>
            </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='//localhost:1313/vi/'>Building with Generative AI on AWS using PartyRock, Amazon Bedrock, and Amazon Q</a> > <a href='//localhost:1313/vi/4-invoking-agent/'>Thực thi Amazon Bedrock Agent</a> > Gửi files cho Agent
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Gửi files cho Agent
            </h1>
          

        



	<h4 id="gửi-files-cho-agent"><strong>Gửi files cho Agent</strong></h4>
<p>Chúng ta có thể gửi files cho Agent để sử dụng trong cuộc trò chuyện bình thường hoặc với code interpreter. Để gửi files, ta gán chúng vào session state.</p>
<h4 id="định-nghĩa-các-hàm-hỗ-trợ"><strong>Định nghĩa các hàm hỗ trợ</strong></h4>
<p>Chúng ta sẽ định nghĩa các hàm hỗ trợ để xử lý các loại file khác nhau, thiết lập đúng kiểu media, gọi Agent và xử lý phản hồi.</p>
<p>Hàm hỗ trợ dưới đây sẽ thêm files vào session state. Files được truyền qua session state, mỗi file sẽ có các thông tin sau:</p>
<ul>
<li><strong>name</strong> (tên file)</li>
<li><strong>sourceType</strong> (‘s3’ hoặc ‘byte_content’ nếu là file cục bộ)</li>
<li><strong>mediaType</strong> (hỗ trợ các định dạng: CSV, XLS, XLSX, YAML, JSON, DOC, DOCX, HTML, MD, TXT, PDF)</li>
<li><strong>data</strong> (dữ liệu của file)</li>
<li><strong>useCase</strong> (chỉ định cách model sử dụng file: <code>CHAT</code> hoặc <code>CODE_INTERPRETER</code>)</li>
</ul>
<p>Tham khảo thêm tài liệu về <a href="https://docs.aws.amazon.com/bedrock/latest/userguide/Agents-test-code-interpretation.html">session state</a> để biết chi tiết.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Trả về session state chứa danh sách files đã thêm vào</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">add_file_to_session_state</span>(file_name, use_case<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;CODE_INTERPRETER&#39;</span>, session_state<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> use_case <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> [<span style="color:#e6db74">&#34;CHAT&#34;</span>, <span style="color:#e6db74">&#34;CODE_INTERPRETER&#34;</span>]:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">ValueError</span>(<span style="color:#e6db74">&#34;Use case phải là &#39;CHAT&#39; hoặc &#39;CODE_INTERPRETER&#39;&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> session_state:
</span></span><span style="display:flex;"><span>        session_state <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;files&#34;</span>: []}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    type <span style="color:#f92672">=</span> file_name<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#34;.&#34;</span>)[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>upper()
</span></span><span style="display:flex;"><span>    name <span style="color:#f92672">=</span> file_name<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#34;/&#34;</span>)[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> type <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;CSV&#34;</span>:
</span></span><span style="display:flex;"><span>        media_type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;text/csv&#34;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> type <span style="color:#f92672">in</span> [<span style="color:#e6db74">&#34;XLS&#34;</span>, <span style="color:#e6db74">&#34;XLSX&#34;</span>]:
</span></span><span style="display:flex;"><span>        media_type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        media_type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;text/plain&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    named_file <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;name&#34;</span>: name,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;source&#34;</span>: {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;sourceType&#34;</span>: <span style="color:#e6db74">&#34;BYTE_CONTENT&#34;</span>, 
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;byteContent&#34;</span>: {
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;mediaType&#34;</span>: media_type,
</span></span><span style="display:flex;"><span>                <span style="color:#e6db74">&#34;data&#34;</span>: open(file_name, <span style="color:#e6db74">&#34;rb&#34;</span>)<span style="color:#f92672">.</span>read()
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;useCase&#34;</span>: use_case
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    session_state[<span style="color:#e6db74">&#39;files&#39;</span>]<span style="color:#f92672">.</span>append(named_file)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> session_state
</span></span></code></pre></div><h4 id="truyền-tệp-để-sử-dụng-với-normal-chat--không-cần-thực-thi-code-"><strong>Truyền tệp để sử dụng với Normal Chat ( không cần thực thi code )</strong></h4>
<p>Trong trường hợp này, ta gửi một file CSV cục bộ và yêu cầu model giải thích dữ liệu trong file. Khi thêm file vào session state, ta đặt <code>useCase='CHAT'</code> thay vì <code>'CODE_INTERPRETER'</code>. Ngoài ra, ta bật <code>show_code_use=True</code> để kiểm tra xem model có sử dụng code interpreter hay không. Kết quả cho thấy model không sử dụng code interpreter mà đánh giá thông tin dựa trên khả năng hiểu ngôn ngữ tự nhiên của nó.</p>
<p>Trước tiên, ta kiểm tra nội dung file. File chứa danh sách giá lịch sử của một cổ phiếu.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> base64 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Mã hóa file CSV dưới dạng base64</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> open(stock_file, <span style="color:#e6db74">&#34;rb&#34;</span>) <span style="color:#66d9ef">as</span> file_name:
</span></span><span style="display:flex;"><span>    data <span style="color:#f92672">=</span> file_name<span style="color:#f92672">.</span>read()
</span></span><span style="display:flex;"><span>    encoded_file <span style="color:#f92672">=</span> data  <span style="color:#75715e"># base64.b64encode(data)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Hiển thị 100 ký tự đầu tiên của file đã mã hóa</span>
</span></span><span style="display:flex;"><span>encoded_file[<span style="color:#ae81ff">0</span>:<span style="color:#ae81ff">100</span>]
</span></span></code></pre></div><p><img src="//localhost:1313/images/4-invoking-agent/4.2-sending-files-to-agent/image-2.png" alt="base-64-encoded"></p>
<p>Tiếp theo, ta gọi Agent để phân tích dữ liệu trong file và cung cấp thông tin. Agent sẽ nhận diện dữ liệu trong file (có chứa dữ liệu giá cổ phiếu giả lập của &lsquo;FAKECO&rsquo;), sau đó phản hồi về loại dữ liệu và phạm vi ngày của dữ liệu. Lưu ý rằng Agent <strong>không cần sử dụng code interpreter</strong> để thực hiện nhiệm vụ này.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Invoke the agent and process the response stream</span>
</span></span><span style="display:flex;"><span>query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;What is the data in this file?&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sessionState<span style="color:#f92672">=</span>add_file_to_session_state(stock_file, <span style="color:#e6db74">&#39;CHAT&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>invoke_agent_helper(query, session_id, agent_id, agent_alias_id, enable_trace<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>, session_state<span style="color:#f92672">=</span>sessionState,
</span></span><span style="display:flex;"><span>                    memory_id<span style="color:#f92672">=</span>memory_id, show_code_use<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span></code></pre></div><p><img src="//localhost:1313/images/4-invoking-agent/4.2-sending-files-to-agent/image.png" alt="normal-chat"></p>
<h4 id="truyền-tệp-để-sử-dụng-với-code-interpreter"><strong>Truyền tệp để sử dụng với Code Interpreter</strong></h4>
<p>Bây giờ, khi chúng ta đã biết nội dung của tệp là dữ liệu chứng khoán, chúng ta có thể đặt các câu hỏi tài chính về nó. Điều này sẽ yêu cầu model gọi <strong>Code Interpreter</strong>.</p>
<p>Ở đây, chúng ta sẽ khởi tạo lại dữ liệu session và chỉ định <strong>use case</strong> là <code>'CODE_INTERPRETER'</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Gọi Agent và xử lý phản hồi</span>
</span></span><span style="display:flex;"><span>query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Given the attached price data file, what pct growth happened across the full time series for closing price? what was the price on the first and last days?&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sessionState <span style="color:#f92672">=</span> add_file_to_session_state(stock_file, <span style="color:#e6db74">&#39;CODE_INTERPRETER&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>invoke_Agent_helper(query, session_id, Agent_id, Agent_alias_id, enable_trace<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>, session_state<span style="color:#f92672">=</span>sessionState,
</span></span><span style="display:flex;"><span>                    memory_id<span style="color:#f92672">=</span>memory_id, show_code_use<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span></code></pre></div><p><img src="//localhost:1313/images/4-invoking-agent/4.2-sending-files-to-agent/image-1.png" alt="invoked-code-chat"></p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="//localhost:1313/vi/4-invoking-agent/4.1-invoking-code-interpreter/" title="Thực Thi Trình Biên Dịch Code"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="//localhost:1313/vi/4-invoking-agent/4.3-generating-files-with-code-interpreter/" title="Tạo File với Trình Thông Dịch Mã" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="//localhost:1313/js/clipboard.min.js?1748172313"></script>
    <script src="//localhost:1313/js/perfect-scrollbar.min.js?1748172313"></script>
    <script src="//localhost:1313/js/perfect-scrollbar.jquery.min.js?1748172313"></script>
    <script src="//localhost:1313/js/jquery.sticky.js?1748172313"></script>
    <script src="//localhost:1313/js/featherlight.min.js?1748172313"></script>
    <script src="//localhost:1313/js/highlight.pack.js?1748172313"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="//localhost:1313/js/modernizr.custom-3.6.0.js?1748172313"></script>
    <script src="//localhost:1313/js/learn.js?1748172313"></script>
    <script src="//localhost:1313/js/hugo-learn.js?1748172313"></script>

    <link href="//localhost:1313/mermaid/mermaid.css?1748172313" rel="stylesheet" />
    <script src="//localhost:1313/mermaid/mermaid.js?1748172313"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
